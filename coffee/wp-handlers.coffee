wpReplacements = ->
  # Replace certain WP elements that are autogenerated with proper
  # ones here
  i = 0
  $("paper-tab").each ->
    href = $(this).attr("data-url")
    if href is window.location.href
      document.querySelector("#menu-main").setAttribute("selected",i)
      console.log("Selected element #{i}")
    else
      i++


$ ->
  wpReplacements()
  adminBarHeight = toInt($("#wpadminbar").height())
  $("paper-tabs").sticky({topSpacing:adminBarHeight,getWidthFrom:"header"})
  # Local searching
  $("#searchsubmit").click ->
    $("#sidebar-search-form").submit()
  $("#s").keyup (e) ->
    code = e.keyCode || e.which
    if code is 13 then $("#sidebar-search-form").submit()
  $("#sidebar-search-form").submit (e) ->
    e.preventDefault()
    url = $("#sidebar-search-form").attr("action")
    searchQuery = encodeURIComponent($("#s").val())
    url = "#{url}?s=#{searchQuery}"
    goTo(url)
  # Arctos Searching
  $("#searchsubmit-arctos").click ->
    $("#arctos-search-form").submit()
  $("#arctos-search").keyup (e) ->
    code = e.keyCode || e.which
    if code is 13 then $("#arctos-search-form").submit()
  $("#arctos-search-form").submit (e) ->
    e.preventDefault()
    url = $("#arctos-search-form").attr("action")
    searchQuery = encodeURIComponent($("#arctos-search").val())
    url = "#{url}?scientific_name=#{searchQuery}"
    openLink(url)
